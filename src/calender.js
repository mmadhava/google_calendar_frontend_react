import React, { Component } from 'react';
import ReactDOM from 'react-dom';
import PropTypes from 'prop-types';
import logo from './logo.svg';
import moment from 'moment';
import { extendMoment } from 'moment-range';
import { combineReducers, createStore } from 'redux';


moment.locale('en');

class Calendar extends React.Component {



  // static defaultProps = {
  //   date: moment()
  // };
    
  // static propTypes = {    
  //   date: React.PropTypes.object.isRequired
  // };

  constructor(props) {
    super(props);

    this.days = this.days.bind(this);  
    this.dayHeaders = this.dayHeaders.bind(this);  
  }

  days() {
    console.log('date',this.props.date)
    let days = [];
   
    const range = moment.range(
      moment(this.props.date).startOf('week'), 
      moment(this.props.date).endOf('week'));

    let daysArr = Array.from(range.by('day'));
    daysArr.map(
      (day) => {
        days.push(<li key={day.format('YYYYMMDD')} className="day">{day.format('D')}</li>)
      });


    //  .by('days', (day) => {
        
    //     days.push(<li key={day.format('YYYYMMDD')} >{day.format('D')}</li>);
    //   }
    // )

    console.log("days",days);
    return days;
  }

  dayHeaders() {
    var dayHeaders = [];

    const range = moment.range(
      moment(this.props.date).startOf('week'), 
      moment(this.props.date).endOf('week')
    );

    let daysHeadersArr = Array.from(range.by('day'));

    daysHeadersArr.map(
      (day) => {
        dayHeaders.push(<li key={day.format('YYYYMMDD')} className="dayHeader">{day.format('dd')}</li>)
    });

    // .by('days', function(moment) {
    //   dayHeaders.push(<li key={moment.format('YYYYMMDD')} className="dayHeader">{moment.format('dd')}</li>)
    // })
    
    return dayHeaders;
  }
    
  render() {
    console.log(this.props)
    return (
      <div className="calendar">
        <div className="goPreviousMonth">
          <svg onClick={this.props.onMonthDecrement}  fill="currentColor" width="50" height="50" viewBox="0 0 40 40" size="50" preserveAspectRatio="xMidYMid meet"><g><path d="m28.571428571428573 17.857142857142858v4.285714285714285q0 0.28999999999999915-0.21142857142856997 0.5028571428571418t-0.5028571428571453 0.21142857142857352h-7.857142857142858v4.285714285714285q0 0.31428571428571317-0.1999999999999993 0.514285714285716t-0.514285714285716 0.1999999999999993q-0.2671428571428578 0-0.5357142857142847-0.2228571428571442l-7.12142857142857-7.120000000000001q-0.20000000000000107-0.19999999999999574-0.20000000000000107-0.5142857142857125t0.1999999999999993-0.5114285714285707l7.142857142857144-7.142857142857142q0.20285714285714107-0.1999999999999993 0.5142857142857125-0.1999999999999993 0.28999999999999915 0 0.5028571428571418 0.21000000000000085t0.21142857142857352 0.5014285714285691v4.285714285714285h7.857142857142858q0.28999999999999915 0 0.5028571428571418 0.2142857142857153t0.21142857142856997 0.5z m3.571428571428573 2.1428571428571423q0-3.3028571428571425-1.62857142857143-6.094285714285714t-4.4228571428571435-4.42-6.0914285714285725-1.6285714285714281-6.097142857142858 1.6285714285714281-4.417142857142856 4.42-1.6328571428571426 6.094285714285714 1.6285714285714281 6.094285714285714 4.421428571428573 4.419999999999998 6.097142857142856 1.6285714285714334 6.092857142857142-1.62857142857143 4.420000000000002-4.419999999999998 1.6300000000000026-6.094285714285718z m5 0q0 4.665714285714287-2.299999999999997 8.604285714285716t-6.237142857142857 6.238571428571426-8.605714285714292 2.3000000000000043-8.6-2.3000000000000043-6.242857142857143-6.238571428571426-2.295714285714286-8.604285714285716 2.3000000000000003-8.604285714285714 6.234285714285714-6.238571428571428 8.604285714285714-2.3000000000000003 8.605714285714285 2.3000000000000003 6.238571428571426 6.238571428571428 2.298571428571435 8.604285714285714z"></path></g></svg>
        </div>
        <p className="monthHeader"><input value={this.props.date} onChange={this.props.onDateChange} /> â€” {moment(this.props.date).format('MMMM YYYY')}</p>
        <div className="goNextMonth">
          <svg onClick={this.props.onMonthIncrement} fill="currentColor" width="50" height="50" viewBox="0 0 40 40" size="50" preserveAspectRatio="xMidYMid meet"><g><path d="m28.571428571428573 20q0 0.31428571428571317-0.1999999999999993 0.5142857142857125l-7.142857142857142 7.142857142857142q-0.20285714285714462 0.1999999999999993-0.514285714285716 0.1999999999999993-0.28999999999999915 0-0.5028571428571418-0.21142857142856997t-0.21142857142857352-0.5028571428571418v-4.285714285714285h-7.857142857142858q-0.28999999999999915 0-0.5028571428571436-0.21142857142856997t-0.21142857142856997-0.5028571428571453v-4.285714285714285q0-0.28999999999999915 0.21142857142857174-0.5028571428571418t0.5028571428571418-0.21142857142857352h7.857142857142858v-4.285714285714285q0-0.31428571428571495 0.1999999999999993-0.5142857142857142t0.514285714285716-0.1999999999999993q0.2671428571428578 0 0.5357142857142847 0.22285714285714242l7.120000000000001 7.120000000000001q0.1999999999999993 0.1999999999999993 0.1999999999999993 0.5142857142857125z m3.571428571428573 0q0-3.3028571428571425-1.62857142857143-6.094285714285714t-4.4228571428571435-4.42-6.0914285714285725-1.6285714285714281-6.097142857142858 1.6285714285714281-4.417142857142856 4.42-1.6328571428571426 6.094285714285714 1.6285714285714281 6.094285714285714 4.421428571428573 4.419999999999998 6.097142857142856 1.6285714285714334 6.092857142857142-1.62857142857143 4.420000000000002-4.419999999999998 1.6300000000000026-6.094285714285718z m5 0q0 4.665714285714287-2.299999999999997 8.604285714285716t-6.237142857142857 6.238571428571426-8.605714285714292 2.3000000000000043-8.6-2.3000000000000043-6.242857142857143-6.238571428571426-2.295714285714286-8.604285714285716 2.3000000000000003-8.604285714285714 6.234285714285714-6.238571428571428 8.604285714285714-2.3000000000000003 8.605714285714285 2.3000000000000003 6.238571428571426 6.238571428571428 2.298571428571435 8.604285714285714z"></path></g></svg>
        </div>
        <ul className="days">
          {this.dayHeaders()}
          {this.days()}
        </ul>
      </div>
    );
  }
}


export default Calendar;
